<section class="wrapper buttonComponent">
    <div class="right_col" role="main">
        <div class="row">
            <div class="col-xs-12 x_title">
                <h3>添加新的笔记本商品</h3>
            </div>
        </div>
        <form id="form-product-add" class="form-horizontal">
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="title">主标题：</label>
                    <input type="text" name="title" value="apple mac" class="form-control" id="title">
                    <div class=" help-block">商品主标题不能超过128个字符</div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="subtitle">副标题：</label>
                    <input type="text" name="subtitle" value="air" class="form-control" id="subtitle">
                    <div class=" help-block">商品副标题不能超过128个字符</div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="price">单价：</label>
                    <input type="text" name="price" value="10000.90" class="form-control" id="price">
                    <div class=" help-block">商品单价最多有两位小数位</div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="promise">服务承诺：</label>
                    <input type="text" name="promise" value="保修一年" class="form-control" id="promise">
                    <div class="col-sm-5 help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="spec">规格：</label>
                    <input type="text" name="spec" value="13寸" class="form-control" id="spec">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="lname">商品名称：</label>
                    <input type="text" name="lname" value="苹果笔记本" class="form-control" id="lname">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="os">操作系统：</label>
                    <input type="text" name="os" value="osx 11" class="form-control" id="os">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="memory">内存容量：</label>
                    <input type="text" name="memory" value="128gb" class="form-control" id="memory">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="resolution">分辨率：</label>
                    <input type="text" name="resolution" value="1400" class="form-control" id="resolution">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="video_card">显卡型号：</label>
                    <input type="text" name="video_card" value="daxu001" class="form-control" id="video_card">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="cpu">处理器：</label>
                    <input type="text" name="cpu" value="arm 11" class="form-control" id="cpu">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="video_memory">显存容量：</label>
                    <input type="text" name="video_memory" value="11m" class="form-control" id="video_memory">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="category">所属分类：</label>
                    <!-- <input type="text" name="category" value="笔记本" class="form-control" id="category"> -->
                    <select id="category" name="category">
                        <option value="-1">----请选择----</option>
                    </select>
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label" for="disk">磁盘类型：</label>
                    <input type="text" name="disk" value="1tb" class="form-control" id="disk">
                    <div class=" help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label">是否促销：</label>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" checked="checked" name="is_onsale" value="1" id="is_onsale">
                        </label>
                    </div>
                    <div class="col-sm-5 help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-5">
                    <label class="control-label">详细说明：</label>
                    <textarea name="details" id="details" class="form-control" style="height: 10em;"></textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-10">
                    <input type="button" value="提交" class="btn btn-success js-submit">
                </div>
            </div>

        </form>
    </div>
    </div>
</section>

<script>
$(function(){
    $.ajax({
        type:"GET",
        url:"../data/product_padd.php",
        success:function(data){
            console.log(data);
            var html = "";
            html += "<option value='-1'>---请选择---</option>";
            $.each(data,function(idx,obj){
                console.log(obj);
                html += `<option value="${obj.fid}_${obj.fname}">${obj.fname}</option> `;
            });
            $("#category").html(html);
        },
        error:function(){
            alert("网络故障 请检查!");
        }
    });
});


//2:提交数据
//2.1:点击提交，获取所有用户输入参数
$(".js-submit").click(function(){
    //a:产品标题
    var title = $("#title");
    var titleReg = /^[\w\s\u4e00-\u9fa5]{1,}$/i;
    if(!titleReg.test(title.val())){
        title.parent().next().css("color","red").html("标题式不正确");
        return;
    }//15:35--15:50
    var subtitle = $("#subtitle");//子标题
    var price = $("#price");      //价格
    var promise = $("#promise");  //售后

    //小技巧:表单序列化
    var data = $("#form-product-add").serialize();
    //2.2:验证
    //2.3:提交 09_product_add.php
    $.ajax({
        type:"POST",
        url:"../data/product_add.php",
        data:data,
        success:function(data){
            alert(data);
        },
        error:function(){
            alert("网络故障，请检查");
        }
    });
});
</script>
